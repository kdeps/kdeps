---
outline: deep
---

# Resource Functions

Each resource comes with built-in functions, all written in [Apple PKL](https://pkl-lang.org). This design provides the
flexibility to extend and customize these functions to suit your specific needs.

Below is a list of functions available for each resource:

## Exec Resource Functions

| **Function**             | **Description**                                                                                                              |
|:-------------------------|:-----------------------------------------------------------------------------------------------------------------------------|
| exec.resource("id")      | Accesses the `exec` resource for the specified ID, providing direct access to `Command`, `Stderr`, `Stdout`, and `ExitCode`. |
| exec.stderr("id")        | Retrieves the standard error (`Stderr`) output of the shell execution for the specified `exec` resource ID.                  |
| exec.env("id", "ENVVAR") | Fetches the value of a defined environment variable (`ENV_VAR`) from the specified `exec` resource in the PKL.               |
| exec.stdout("id")        | Retrieves the standard output (`Stdout`) of the shell execution for the specified `exec` resource ID.                        |
| exec.exitCode("id")      | Fetches the exit code resulting from the shell execution of the specified `exec` resource ID.                                |
| exec.file("id")          | Retrieves the file path where the stdout output was automatically saved during runtime.                                      |

**Example:**
```apl
ActionID = "execResource"
Name = "Shell Command"
Description = "Execute a shell command"
Category = "system"
Run {
  Exec {
    Command = "ls -la"
    Args { "-la" }
    Env { ["PATH"] = "/usr/bin:/bin" }
  }
}
```

## HTTP Client Resource Functions

| **Function**                             | **Description**                                                                                                                    |
|:-----------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------|
| client.resource("id")                    | Retrieves the HTTP `client` resource for the specified ID, providing access to `Method`, `URL`, `Data`, `Headers`, and `Response`. |
| client.responseBody("id")                | Retrieves the body of the HTTP `client` response for the specified ID.                                                             |
| client.responseHeader("id", "HEADER_ID") | Fetches the value of the specified header (`HEADER_ID`) from the HTTP `client` response for the given resource ID.                 |
| client.file("id")                        | Retrieves the file path where the response body output was automatically saved during runtime.                                     |

**Example:**
```apl
ActionID = "clientResource"
Name = "HTTP Client"
Description = "Make HTTP requests"
Category = "network"
Run {
  Client {
    Method = "GET"
    URL = "https://api.example.com/data"
    Headers { ["Authorization"] = "Bearer token" }
  }
}
```

## LLM Resource Functions

| **Function**               | **Description**                                                                                                                             |
|:---------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------|
| llm.resource("id")         | Accesses the `llm` resource for the specified ID, providing details about the `Prompt`, `Response`, `JSONResponse`, and `JSONResponseKeys`. |
| llm.response("id")         | Retrieves the response generated by the LLM for the specified resource ID.                                                                  |
| llm.prompt("id")           | Retrieves the prompt sent to the LLM for the specified resource ID.                                                                         |
| llm.JSONResponse("id")     | Retrieves the configuration of the `JSONResponse` for the specified resource ID.                                                            |
| llm.JSONResponseKeys("id") | Fetches the configuration of `JSONResponseKeys` for the specified resource ID.                                                              |
| llm.file("id")             | Retrieves the file path where the llm response output was automatically saved during runtime.                                               |

**Example:**
```apl
ActionID = "llmResource"
Name = "Language Model"
Description = "Process queries with LLM"
Category = "ai"
Run {
  Chat {
    Model = "llama3.2:1b"
    Prompt = "Answer this question: @(request.data().query)"
    JSONResponse = true
    JSONResponseKeys { "answer"; "confidence" }
    TimeoutDuration = 60.s
  }
}
```

## Python Resource Functions

| **Function**                | **Description**                                                                                                                                    |
|:----------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------|
| python.resource("id")       | Accesses the `python` resource for the specified ID, providing details about the `PythonEnvironment`, `Script`, `Stderr`, `Stdout`, and `ExitCode`. |
| python.stderr("id")         | Retrieves the standard error (`Stderr`) output of the shell pythonution for the specified `python` resource ID.                                    |
| python.env("id", "ENV_VAR") | Fetches the value of a defined environment variable (`ENV_VAR`) from the specified `python` resource in the PKL.                                   |
| python.stdout("id")         | Retrieves the standard output (`Stdout`) of the shell pythonution for the specified `python` resource ID.                                          |
| python.exitCode("id")       | Fetches the exit code resulting from the shell pythonution of the specified `python` resource ID.                                                  |
| python.file("id")           | Retrieves the file path where the python stdout output was automatically saved during runtime.                                                     |

**Example:**
```apl
ActionID = "pythonResource"
Name = "Python Script"
Description = "Execute Python code"
Category = "scripting"
Run {
  Python {
    Script = "print('Hello, World!')"
    Input { ["data"] = "@(request.data())" }
    Output { ["result"] = "stdout" }
  }
}
```
